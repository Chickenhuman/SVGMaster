<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Master Tool (Interactive Code)</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="main-container">
<div class="sidebar">
    <h3>Properties</h3>
    
    <div class="properties-panel">
        
        <div class="control-row">
            <label>색상 (선/채우기)</label>
            <div class="input-group">
                <input type="color" id="inpColor" value="#4a90e2">
                <input type="text" id="inpHex" value="#4a90e2">
            </div>
        </div>
        
        <div class="control-row">
            <label>채우기 색상</label>
            <div class="input-group">
                 <input type="color" id="inpFill" value="#ffffff" style="width:100%;">
                 <button class="btn-tool" id="btnNoFill" style="padding: 2px 8px; font-size:11px;">🚫 없음</button>
            </div>
        </div>

        <div class="control-row">
            <label>선 두께: <span id="valWidth">2</span>px</label>
            <input type="range" id="inpWidth" min="1" max="20" value="2">
        </div>

        <hr style="border: 0; border-top: 1px solid #eee; margin: 5px 0;">

        <div class="control-row">
            <label>곡률 (Tension): <span id="valTension">0</span></label>
            <input type="range" id="inpTension" min="0" max="1" step="0.1" value="0">
        </div>

        <div class="control-row">
            <label>회전 (Rotate): <span id="valRotate">0</span>°</label>
            <input type="range" id="inpRotate" min="0" max="360" value="0">
        </div>

        <div class="control-row">
            <label>선 끝 모양 (Cap)</label>
            <select id="inpCap">
                <option value="round">Round</option>
                <option value="butt">Butt</option>
                <option value="square">Square</option>
            </select>
        </div>
        
        <div class="control-row" style="flex-direction:row; align-items:center;">
            <input type="checkbox" id="chkAutoClose">
            <label for="chkAutoClose" style="margin-left:5px; cursor:pointer;">도형 자동 닫기</label>
        </div>

        <div class="control-row">
            <label>캔버스 배경색</label>
            <input type="color" id="inpBgColor" value="#ffffff" style="width:100%; height:30px;">
        </div>
        
        <div style="margin-top:auto;">
            <button class="action-btn primary" id="btnFinish" disabled>✔️ 완료 (Space)</button>
            <button class="action-btn" id="btnDownload">💾 이미지 저장</button>
        </div>
    </div>
</div>

<div class="canvas-area">
 <div class="top-bar">
    <button id="btnToggleSidebar" class="btn-icon" title="사이드바 토글">◀</button>
<div class="v-divider"></div>


    
    <button class="btn-icon active btn-tool" id="toolDraw" data-mode="draw" title="그리기">✏️</button>
    <button class="btn-icon btn-tool" id="toolSelect" data-mode="select" title="선택">👆</button>
    <button class="btn-icon btn-tool" id="toolPaint" data-mode="paint" title="페인트">🎨</button>
    <button class="btn-icon btn-tool" id="toolEraser" data-mode="eraser" title="지우개 (E)">🧹</button>
    <div class="dropdown-container">
        <button class="btn-icon btn-tool" id="toolShape" data-mode="shape" title="도형">📐</button>
        <div id="shapeSubMenu" class="dropdown-menu">
            <button class="btn-sub active" data-shape="rect">⬜ 사각형</button>
            <button class="btn-sub" data-shape="circle">⭕ 원</button>
            <button class="btn-sub" data-shape="triangle">🔺 삼각형</button>
        </div>
    </div>
<div class="dropdown-container">
    <button class="btn-icon btn-tool" id="toolAlign" title="정렬 메뉴 열기">📊</button>
    <div id="alignSubMenu" class="dropdown-menu">
        <button class="btn-sub btn-align" id="btnAlignLeft">│← 왼쪽 맞춤</button>
        <button class="btn-sub btn-align" id="btnAlignCenter">→│← 가로 중앙</button>
        <button class="btn-sub btn-align" id="btnAlignRight">→│ 오른쪽 맞춤</button>
        <hr style="margin: 4px 0; border:0; border-top:1px solid #eee;">
        <button class="btn-sub btn-align" id="btnAlignTop">↑ 위쪽 맞춤</button>
        <button class="btn-sub btn-align" id="btnAlignMiddle">─ 세로 중앙</button>
        <button class="btn-sub btn-align" id="btnAlignBottom">↓ 아래쪽 맞춤</button>
    </div>
</div>
    <div class="v-divider"></div>

    <button class="btn-icon" id="btnGrid" title="그리드">▦</button>
    <button class="btn-icon active" id="btnSnap" title="스냅">🧲</button>
    
    <div class="v-divider"></div>

    <button class="btn-icon" id="btnUndo" title="취소 (Ctrl+Z)">↩️</button>
    <button class="btn-icon" id="btnRedo" title="재실행 (Ctrl+Y)">↪️</button>

    <div class="v-divider"></div>

    <button class="btn-icon" id="btnGroup" title="그룹화">🔗</button>
    <button class="btn-icon" id="btnUngroup" title="그룹해제">💔</button>
    <button class="btn-icon" id="btnToFront" title="맨 앞으로">🔼</button>
    <button class="btn-icon" id="btnToBack" title="맨 뒤로">🔽</button>
    <button class="btn-icon" id="btnDelete" title="삭제" style="color:var(--accent-red);">🗑️</button>
    
    <div class="v-divider"></div>
    
<button class="btn-icon" id="btnHelp" title="도움말 / 단축키 (F1)">❓</button>
</div>


    <div id="svg-wrapper">
        <svg id="mainSvg" width="800" height="600" xmlns="http://www.w3.org/2000/svg" style="background-color: #ffffff;">
            <defs>
                <pattern id="gridPattern" width="20" height="20" patternUnits="userSpaceOnUse">
                    <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                </pattern>
            </defs>
            <rect id="gridRect" width="100%" height="100%" fill="url(#gridPattern)" style="pointer-events: none; display: none;" />
            <rect id="marqueeRect" fill="rgba(74, 144, 226, 0.1)" stroke="#4a90e2" stroke-width="1" stroke-dasharray="4 4" style="display: none; pointer-events: none;" />
            <g id="uiLayer" style="display: none;">
                <rect id="selectionBox" fill="transparent" stroke="#4a90e2" stroke-width="1" stroke-dasharray="4 4" pointer-events="all" style="cursor: move;"/>        
                <rect id="handleResize" width="10" height="10" fill="white" stroke="#4a90e2" style="cursor: nwse-resize;" />
                <circle id="handleRotate" r="5" fill="white" stroke="#ff4757" style="cursor: grab;" />
                <line id="rotateLine" stroke="#4a90e2" stroke-width="1" />
            </g>
        </svg>
    </div>
</div>

<div class="code-area">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
        <h3 style="color:white; margin:0;">SVG Code</h3>
        <div style="display:flex; gap:5px;"> <button id="btnCopyCode" class="action-btn" style="width:auto; padding:5px 10px; font-size:11px;">📋 복사</button>
            <button id="btnToggleView" class="action-btn" style="width:auto; padding:5px 10px; font-size:11px;">TEXT로 보기</button>
        </div>
    </div>
    
    <div id="codeViewer" class="code-view"></div>
    <textarea id="codeText" class="code-view" style="display:none;"></textarea>
</div>
<div id="helpModal" class="modal-overlay">
    <div class="modal-window">
        <div class="modal-header">
            <h2>📖 SVG Master 사용 설명서</h2>
            <button id="btnCloseHelp" class="btn-close">×</button>
        </div>
        <div class="modal-content">
            <p class="intro">웹에서 바로 벡터 그래픽을 디자인하고 코드를 생성하세요.</p>

            <div class="help-section">
                <h3>⌨️ 단축키 (Keyboard Shortcuts)</h3>
                <table class="shortcut-table">
                    <tr><th>기능</th><th>단축키</th><th>설명</th></tr>
                    <tr><td><strong>선택 (Select)</strong></td><td><kbd>V</kbd></td><td>객체 선택 및 이동</td></tr>
                    <tr><td><strong>그리기 (Draw)</strong></td><td><kbd>D</kbd></td><td>자유 곡선 그리기 (Pen)</td></tr>
                    <tr><td><strong>지우개 (Eraser)</strong></td><td><kbd>E</kbd></td><td>클릭: 삭제 / 드래그: 문질러 삭제</td></tr>
                    <tr><td><strong>페인트 (Paint)</strong></td><td><kbd>B</kbd></td><td>클릭하여 색 채우기</td></tr>
                    <tr><td>사각형 (Rect)</td><td><kbd>R</kbd></td><td>드래그하여 사각형 생성</td></tr>
                    <tr><td>원 (Circle)</td><td><kbd>C</kbd></td><td>드래그하여 원 생성</td></tr>
                    <tr><td>삼각형 (Triangle)</td><td><kbd>T</kbd></td><td>클릭하여 삼각형 생성</td></tr>
                    <tr><td>그룹화 / 해제</td><td><kbd>Ctrl</kbd>+<kbd>G</kbd> / <kbd>Shift</kbd>+<kbd>G</kbd></td><td>여러 객체를 하나로 묶기/풀기</td></tr>
                    <tr><td>복사 / 붙여넣기</td><td><kbd>Ctrl</kbd>+<kbd>C</kbd> / <kbd>V</kbd></td><td>선택 객체 복제</td></tr>
                    <tr><td>실행 취소 / 재실행</td><td><kbd>Ctrl</kbd>+<kbd>Z</kbd> / <kbd>Y</kbd></td><td>작업 내역 되돌리기</td></tr>
                    <tr><td>삭제</td><td><kbd>Del</kbd></td><td>선택된 객체 삭제</td></tr>
                    <tr><td>전체 선택</td><td><kbd>Ctrl</kbd>+<kbd>A</kbd></td><td>모든 도형 선택</td></tr>
                    <tr><td>순서 변경</td><td><kbd>[</kbd> / <kbd>]</kbd></td><td>맨 뒤로 / 맨 앞으로</td></tr>
                </table>
            </div>

            <div class="help-section">
                <h3>💡 유용한 팁 (Tips)</h3>
                <ul>
                    <li><strong>미세 조정:</strong> 선택 후 <kbd>방향키</kbd>로 1px씩 이동 (<kbd>Shift</kbd> 누르면 10px).</li>
                    <li><strong>지우개 사용법:</strong>
                        <ul>
                            <li><span style="color:#e74c3c;">■</span> <strong>색칠된 면 클릭:</strong> 채우기 색상만 지워집니다.</li>
                            <li><span style="color:#e74c3c;">━</span> <strong>선 클릭:</strong> 도형 전체가 삭제됩니다.</li>
                            <li><strong>드래그:</strong> 마우스로 쓱 긁으면 닿는 도형이 모두 삭제됩니다.</li>
                        </ul>
                    </li>
                    <li><strong>다중 선택:</strong> 빈 공간을 드래그하면 여러 도형을 한 번에 선택할 수 있습니다.</li>
                    <li><strong>정렬(Alignment):</strong> 여러 개를 선택하고 상단의 📊 버튼을 눌러보세요.</li>
                    <li><strong>역방향 편집:</strong> 우측 하단 코드창에서 코드를 직접 수정하면 캔버스에 즉시 반영됩니다.</li>
                </ul>
            </div>
        </div>
        <div class="modal-footer">
            <button class="action-btn primary" id="btnOkHelp" style="width:100px;">확인</button>
        </div>
    </div>
</div>
<script src="script.js"></script>
</body>
</html>