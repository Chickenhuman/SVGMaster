<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Master Tool</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="main-container">
    <div class="sidebar">
        <h3 data-i18n="properties">Properties</h3>
        
        <div class="properties-panel">
            <div class="control-row">
                <label data-i18n="strokeColor">색상 (선)</label>
                <div class="input-group">
                    <input type="color" id="inpColor" value="#4a90e2">
                    <input type="text" id="inpHex" value="#4a90e2">
                </div>
            </div>
            
            <div class="control-row">
                <label data-i18n="fillColor">채우기 색상</label>
                <div class="input-group">
                     <input type="color" id="inpFill" value="#ffffff" style="width:100%;">
                     <button class="btn-tool" id="btnNoFill" data-i18n="noFill" style="padding: 2px 8px; font-size:11px;">🚫 없음</button>
                </div>
            </div>
    
            <div class="control-row">
                <label><span data-i18n="strokeWidth">선 두께</span>: <span id="valWidth">2</span>px</label>
                <input type="range" id="inpWidth" min="1" max="20" value="2">
            </div>
    
            <div class="control-row">
                <label><span data-i18n="tension">곡률</span>: <span id="valTension">0</span></label>
                <input type="range" id="inpTension" min="0" max="1" step="0.1" value="0">
            </div>
    
            <div class="control-row">
                <label><span data-i18n="rotate">회전</span>: <span id="valRotate">0</span>°</label>
                <input type="range" id="inpRotate" min="0" max="360" value="0">
            </div>
    
            <div class="control-row">
                <label data-i18n="lineCap">선 끝 모양</label>
                <select id="inpCap">
                    <option value="round">Round</option>
                    <option value="butt">Butt</option>
                    <option value="square">Square</option>
                </select>
            </div>
            
            <div class="control-row" style="flex-direction:row; align-items:center;">
                <input type="checkbox" id="chkAutoClose">
                <label for="chkAutoClose" data-i18n="autoClose" style="margin-left:5px; cursor:pointer;">도형 자동 닫기</label>
            </div>
    
            <div class="control-row">
                <label data-i18n="canvasBg">캔버스 배경색</label>
                <input type="color" id="inpBgColor" value="#ffffff" style="width:100%; height:30px;">
            </div>
            
            <div style="margin-top:auto;">
                <button class="action-btn primary" id="btnFinish" data-i18n="btnFinish" disabled>✔️ 완료 (Space)</button>
            </div>
        </div>

        <div class="app-footer">
            <small data-i18n="msg_copyright">© 2025 ChickenHuman. All rights reserved.</small>
        </div>
    </div>

    <div class="canvas-area">
        <div class="top-bar">
            <div class="app-title">
                <span>SVG</span> Master
            </div>
            <div class="v-divider"></div>
            <button id="btnToggleSidebar" class="btn-icon" data-i18n-title="t_sidebar" title="사이드바 토글">◀</button>
            <div class="v-divider"></div>
            
            <button class="btn-icon active btn-tool" id="toolDraw" data-mode="draw" data-i18n-title="t_draw" title="그리기">✏️</button>
            <button class="btn-icon btn-tool" id="toolSelect" data-mode="select" data-i18n-title="t_select" title="선택">👆</button>
            <button class="btn-icon btn-tool" id="toolPaint" data-mode="paint" data-i18n-title="t_paint" title="페인트">🎨</button>
            <button class="btn-icon btn-tool" id="toolEraser" data-mode="eraser" data-i18n-title="t_eraser" title="지우개">🧹</button>
            
            <div class="dropdown-container">
                <button class="btn-icon btn-tool" id="toolShape" data-mode="shape" data-i18n-title="t_shape" title="도형">📐</button>
                <div id="shapeSubMenu" class="dropdown-menu">
                    <button class="btn-sub active" data-shape="rect" data-i18n="s_rect">⬜ 사각형</button>
                    <button class="btn-sub" data-shape="circle" data-i18n="s_circle">⭕ 원</button>
                    <button class="btn-sub" data-shape="triangle" data-i18n="s_triangle">🔺 삼각형</button>
                </div>
            </div>
        
            <div class="dropdown-container">
                <button class="btn-icon btn-tool" id="toolAlign" data-i18n-title="t_align" title="정렬 메뉴">📊</button>
                <div id="alignSubMenu" class="dropdown-menu">
                    <button class="btn-sub btn-align" id="btnAlignLeft" data-i18n="a_left">│← 왼쪽 맞춤</button>
                    <button class="btn-sub btn-align" id="btnAlignCenter" data-i18n="a_center">→│← 가로 중앙</button>
                    <button class="btn-sub btn-align" id="btnAlignRight" data-i18n="a_right">→│ 오른쪽 맞춤</button>
                    <hr style="margin: 4px 0; border:0; border-top:1px solid #eee;">
                    <button class="btn-sub btn-align" id="btnAlignTop" data-i18n="a_top">↑ 위쪽 맞춤</button>
                    <button class="btn-sub btn-align" id="btnAlignMiddle" data-i18n="a_middle">─ 세로 중앙</button>
                    <button class="btn-sub btn-align" id="btnAlignBottom" data-i18n="a_bottom">↓ 아래쪽 맞춤</button>
                </div>
            </div>
        
            <button class="btn-icon" id="btnGrid" data-i18n-title="t_grid" title="그리드">▦</button>
            <button class="btn-icon active" id="btnSnap" data-i18n-title="t_snap" title="스냅" style="width:auto; padding:0 10px; font-size:12px;">🧲 On</button>
            
            <div class="v-divider"></div>
            
            <button class="btn-icon" id="btnUndo" data-i18n-title="t_undo" title="취소">↩️</button>
            <button class="btn-icon" id="btnRedo" data-i18n-title="t_redo" title="재실행">↪️</button>
            
            <div class="v-divider"></div>
            
            <button class="btn-icon" id="btnGroup" data-i18n-title="t_group" title="그룹화">🔗</button>
            <button class="btn-icon" id="btnUngroup" data-i18n-title="t_ungroup" title="그룹해제">💔</button>
            <button class="btn-icon" id="btnToFront" data-i18n-title="t_front" title="맨 앞으로">🔼</button>
            <button class="btn-icon" id="btnToBack" data-i18n-title="t_back" title="맨 뒤로">🔽</button>
            <button class="btn-icon" id="btnDelete" data-i18n-title="t_delete" title="삭제" style="color:var(--accent-red);">🗑️</button>
            
            <div class="v-divider"></div>

            <button class="btn-icon" id="btnDownload" data-i18n-title="btnDownload" title="이미지 저장">💾</button>

            <div class="v-divider"></div>
            
            <button class="btn-icon" id="btnHelp" data-i18n-title="t_help" title="도움말">❓</button>
            <div class="v-divider"></div>
            
            <button class="btn-icon active" id="btnToggleCode" data-i18n-title="t_code" title="코드창 토글">📜</button> 

            <div class="v-divider"></div>

            <select id="langSelect" class="btn-tool" style="width: auto; padding: 2px 5px;">
                <option value="ko">KO</option>
                <option value="en">EN</option>
                <option value="ja">JA</option>
            </select>
        </div>

        <div id="svg-wrapper">
            <svg id="mainSvg" width="800" height="600" xmlns="http://www.w3.org/2000/svg" style="background-color: #ffffff;">
                <defs>
                    <pattern id="gridPattern" width="20" height="20" patternUnits="userSpaceOnUse">
                        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect id="gridRect" width="100%" height="100%" fill="url(#gridPattern)" style="pointer-events: none; display: none;" />
                <rect id="marqueeRect" fill="rgba(74, 144, 226, 0.1)" stroke="#4a90e2" stroke-width="1" stroke-dasharray="4 4" style="display: none; pointer-events: none;" />
                <g id="uiLayer" style="display: none;">
                    <rect id="selectionBox" fill="transparent" stroke="#4a90e2" stroke-width="1" stroke-dasharray="4 4" pointer-events="all" style="cursor: move;"/>        
                    <rect id="handleResize" width="10" height="10" fill="white" stroke="#4a90e2" style="cursor: nwse-resize;" />
                    <circle id="handleRotate" r="5" fill="white" stroke="#ff4757" style="cursor: grab;" />
                    <line id="rotateLine" stroke="#4a90e2" stroke-width="1" />
                </g>
            </svg>
        </div>
    </div>

    <div class="code-area">
        <div class="code-header">
            <h3 data-i18n="codeTitle" style="color:#333; margin:0;">SVG Code</h3>
            <div class="code-controls"> 
                <button id="btnCopyCode" class="action-btn" data-i18n="btnCopy">📋 복사</button>
                <button id="btnToggleView" class="action-btn" data-i18n="btnViewText">TEXT로 보기</button>
                <button id="btnCloseCode" class="btn-close-code">×</button>
            </div>
        </div>
        
        <div id="codeViewer" class="code-view"></div>
        <textarea id="codeText" class="code-view" style="display:none;"></textarea>
    </div>
</div>

<div id="helpModal" class="modal-overlay">
    <div class="modal-window">
        <div class="modal-header">
            <h2 data-i18n="h_title">📖 SVG Master 사용 설명서</h2>
            <button id="btnCloseHelp" class="btn-close">×</button>
        </div>
        <div class="modal-content">
            <p class="intro" data-i18n="h_intro">웹에서 바로 벡터 그래픽을 디자인하고 코드를 생성하세요.</p>

            <div class="help-section">
                <h3 data-i18n="h_shortcuts">⌨️ 단축키</h3>
                <table class="shortcut-table">
                    <tr>
                        <th data-i18n="h_col_func">기능</th>
                        <th data-i18n="h_col_key">단축키</th>
                        <th data-i18n="h_col_desc">설명</th>
                    </tr>
                    <tr>
                        <td><strong data-i18n="k_select">선택</strong></td>
                        <td><kbd>V</kbd></td>
                        <td data-i18n="d_select">객체 선택 및 이동</td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="k_draw">그리기</strong></td>
                        <td><kbd>D</kbd></td>
                        <td data-i18n="d_draw">자유 곡선 그리기 (Pen)</td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="k_eraser">지우개</strong></td>
                        <td><kbd>E</kbd></td>
                        <td data-i18n="d_eraser">클릭: 삭제 / 드래그: 문질러 삭제</td>
                    </tr>
                    <tr>
                        <td><strong data-i18n="k_paint">페인트</strong></td>
                        <td><kbd>B</kbd></td>
                        <td data-i18n="d_paint">클릭하여 색 채우기</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_rect">사각형</td>
                        <td><kbd>R</kbd></td>
                        <td data-i18n="d_rect">드래그하여 사각형 생성</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_circle">원</td>
                        <td><kbd>C</kbd></td>
                        <td data-i18n="d_circle">드래그하여 원 생성</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_triangle">삼각형</td>
                        <td><kbd>T</kbd></td>
                        <td data-i18n="d_triangle">클릭하여 삼각형 생성</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_group">그룹화 / 해제</td>
                        <td><kbd>Ctrl</kbd>+<kbd>G</kbd></td>
                        <td data-i18n="d_group">묶기/풀기</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_copy">복사 / 붙여넣기</td>
                        <td><kbd>Ctrl</kbd>+<kbd>C</kbd> / <kbd>V</kbd></td>
                        <td data-i18n="d_copy">복제</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_undo">실행 취소</td>
                        <td><kbd>Ctrl</kbd>+<kbd>Z</kbd> / <kbd>Y</kbd></td>
                        <td data-i18n="d_undo">되돌리기 / 재실행</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_del">삭제</td>
                        <td><kbd>Del</kbd></td>
                        <td data-i18n="d_del">선택 삭제</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_all">전체 선택</td>
                        <td><kbd>Ctrl</kbd>+<kbd>A</kbd></td>
                        <td data-i18n="d_all">모두 선택</td>
                    </tr>
                    <tr>
                        <td data-i18n="k_order">순서 변경</td>
                        <td><kbd>[</kbd> / <kbd>]</kbd></td>
                        <td data-i18n="d_order">맨 뒤로 / 맨 앞으로</td>
                    </tr>
                </table>
            </div>

            <div class="help-section">
                <h3 data-i18n="h_tips">💡 유용한 팁</h3>
                <ul>
                    <li data-i18n="h_tip_1">미세 조정: 방향키로 1px씩 이동 (Shift: 10px)</li>
                    <li data-i18n="h_tip_2">역방향 편집: 코드창을 수정하면 캔버스에 즉시 반영됩니다.</li>
                </ul>
            </div>
        </div>
        <div class="modal-footer">
            <button class="action-btn primary" id="btnOkHelp" style="width:100px;">확인</button>
        </div>
    </div>
</div>

<script src="i18n.js"></script>
<script src="script.js"></script>
</body>
</html>